!function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):this.$script=t()}(0,function(){function e(e,t){for(var n=0,r=e.length;n<r;++n)if(!t(e[n]))return c;return 1}function t(t,n){e(t,function(e){return!n(e)})}function n(a,i,s){function c(e){return e.call?e():f[e]}function u(){if(!--w){f[v]=1,g&&g();for(var n in p)e(n.split("|"),c)&&!t(p[n],c)&&(p[n]=[])}}a=a[d]?a:[a];var l=i&&i.call,g=l?i:s,v=l?a.join(""):i,w=a.length;return setTimeout(function(){t(a,function e(t,n){return null===t?u():(!n&&!/^https?:\/\//.test(t)&&o&&(t=-1===t.indexOf(".js")?o+t+".js":o+t),h[t]?(v&&(m[v]=1),2==h[t]?u():setTimeout(function(){e(t,!0)},0)):(h[t]=1,v&&(m[v]=1),void r(t,u)))})},0),n}function r(e,t){var n,r=i.createElement("script");r.onload=r.onerror=r[l]=function(){r[u]&&!/^c|loade/.test(r[u])||n||(r.onload=r[l]=null,n=1,h[e]=2,t())},r.async=1,r.src=a?e+(-1===e.indexOf("?")?"?":"&")+a:e,s.insertBefore(r,s.lastChild)}var o,a,i=document,s=i.getElementsByTagName("head")[0],c=!1,d="push",u="readyState",l="onreadystatechange",f={},m={},p={},h={};return n.get=r,n.order=function(e,t,r){!function o(a){a=e.shift(),e.length?n(a,o):n(a,t,r)}()},n.path=function(e){o=e},n.urlArgs=function(e){a=e},n.ready=function(r,o,a){var i=[];return!t(r=r[d]?r:[r],function(e){f[e]||i[d](e)})&&e(r,function(e){return f[e]})?o():function(e){p[e]=p[e]||[],p[e][d](o),a&&a(i)}(r.join("|")),n},n.done=function(e){n([null],e)},n}),function(e){function t(t,n){if(!/^(https?:)\/\/([-.a-zA-Z0-9]+(:[0-9]{1,5})?)$/.test(t))return!1;var r=e.document.createElement("a");return r.href=t,("https:"!==n.protocol||"https:"===r.protocol)&&s.some(function(e){return e.lastIndex=0,e.test(r.host)})}var n=function(){return new RegExp(/^(([-*a-zA-Z0-9]+[.])*([-a-zA-Z0-9]+[.]))?[-a-zA-Z0-9]+(:[0-9]{1,5})?$/)},r=[e.location.host],o=document.currentScript||document.querySelector("script#smartedit-injector");if(o){var a=o.getAttribute("data-smartedit-allow-origin");if(!a){var i=e.document.createElement("a");i.href=o.src,i.search.replace(/([?&])([^&=]+)=([^&]*)?/g,function(e,t,n,r){"allow-origin"===n&&(a=decodeURI(r))})}a&&(r=r.concat(a.split(",")))}var s=r.map(function(e){var t=e.trim();if(n().test(t)){var r=["^","$"].join(t.replace(/\./g,"\\.").replace(/\*/g,"[-a-zA-Z0-9]*"));return new RegExp(r)}throw new Error("Allowed whitelist characters are a-Z, A-Z, 0-9, - or period. A wildcard * can be used to represent a prefixed domain. E.g.: *.domain.com can be used for subdomain.domain.com.")}),c="smartEditBootstrap";parent.postMessage({pk:Math.random(),gatewayId:c,eventId:"loading",data:{location:document.location.href}},"*"),e.onbeforeunload=function(){parent.postMessage({pk:Math.random(),gatewayId:c,eventId:"unloading",data:{location:document.location.href}},"*")},function e(){parent.postMessage({pk:Math.random(),gatewayId:"heartBeatGateway",eventId:"heartBeat",data:{location:document.location.href}},"*"),setTimeout(e,500)}(),e.addEventListener("load",function(){parent.postMessage({pk:Math.random(),gatewayId:c,eventId:"bootstrapSmartEdit",data:{location:document.location.href}},"*")});var d=function(e,t,n){n<t.length&&$script(t[n],function(){d(e,t,n+1)})},u=function(e,t,n){var r=document.createElement("link");r.rel="stylesheet",r.href=t[n],e.appendChild(r),n+1<t.length&&u(e,t,n+1)};e.addEventListener("message",function(n){var r=n.data,o=r.gatewayId===c&&"bundle"===r.eventId;if(o){if(!t(n.origin,e.location))throw new Error(n.origin+" is not allowed to override this storefront.");if(o){var a=r.data;if(e.smartedit=e.smartedit||{},a.resources&&a.resources.properties)for(var i in a.resources.properties)e.smartedit[i]=a.resources.properties[i];var s=document.getElementsByTagName("head")[0];a.resources&&a.resources.js&&a.resources.js.length>0&&d(s,a.resources.js,0),a.resources&&a.resources.css&&a.resources.css.length>0&&u(s,a.resources.css,0)}}},!1),e.SmarteditWAI={},e.SmarteditWAI.isAllowed=t,e.SmarteditWAI.createAllowOriginRegex=n,Object.freeze(e.SmarteditWAI)}(window);